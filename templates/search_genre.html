{% extends 'base.html' %}
{% block page_title %} <title>Search Books</title> {% endblock %}

{% block content %}
<br>
<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <h2>Search All Books</h2>
        </div>
    </div>
</div>

<br>
<div class="container">
    <div class="row">
        <div class="col-sm-12 col-md-6">
            <h3><a class="search_heading" href="{{ url_for('search_genre') }}">Search genre</a></h3>
        </div>
        <div class="col-sm-12 col-md-6">
            <h3><a class="search_heading" href="{{ url_for('search_rating') }}">Search ratings</a></h3>
        </div>
    </div> <!-- closing row -->
    <br>
</div> <!-- closing container -->

<br>
<div class="container">
    <div class="row">
        {% for genre in all_genre %}
        <form action="{{ url_for('search_genre_function') }}" method="POST">
            
            <div class="col-sm-12 col-md-4">
                <button class="search_button" type="submit" name="genre_name" value="{{genre.genre_name}}">{{genre.genre_name}}</button>
            </div>
            
        </form>
        {% endfor %}
    </div>
</div>

<br>
<!-- Results for genre search -->
{% if results %}
<div class='container'>
    <div class='row'>
        <div class='col-sm-12 col-md-12'>

            {% if genre_count == 0 %}
            <p>No {{genre_name}} Books Found</p>
            {% elif genre_count == 1 %}
            <p>{{genre_count}} {{genre_name}} Book Found</p>
            {% else %}
            <p>{{genre_count}} {{genre_name}} Books Found</p>
            {% endif %}

        </div>
    </div>
</div>
<br>
<div class="container">
    <div class="row">
        <div class="col-sm-12">
            {% for book in results %}

            <a href="{{ url_for('full_book_details', book_id=book._id)}}">
                <p>{{book.book_name|title}}</p>
            </a>
            <p>by {{book.author_name|title}}</p>
            <p>Rating: {{book.rating_value}} <i class="fa fa-star star_rating"></i></p>
            <hr>
            {% endfor %}

        </div>
    </div>
</div>
{% endif %}

{% endblock %}